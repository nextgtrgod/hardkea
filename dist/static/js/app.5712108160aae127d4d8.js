webpackJsonp([11],{"0CTI":function(e,t){},"2uFj":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r="https://hardkea.herokuapp.com",a={base:r,sendOrder:r+"/api/sendOrder",products:r+"/api/products",categories:r+"/api/categories"}},M0ix:function(e,t,n){"use strict";t.a=function(e){var t=e.method,n=void 0===t?"POST":t,r=e.url,o=e.data;return new s.a(function(e,t){i.a.$emit("api-loading");var s=new XMLHttpRequest;s.open(n,r),"POST"===n&&s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.onload=function(){this.status>=200&&this.status<300?(i.a.$emit("api-loaded"),e(JSON.parse(s.response))):(i.a.$emit("api-loaded"),t({status:s.status,statusText:s.statusText}))},s.onerror=function(){i.a.$emit("api-loaded"),t({status:s.status,statusText:s.statusText})},"POST"===n&&o?s.send(a()(o)):s.send()})};var r=n("mvHQ"),a=n.n(r),o=n("//Fk"),s=n.n(o),i=n("n/Yi")},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("j1ja");var r=n("7+uW"),a=n("Xxa5"),o=n.n(a),s=n("exGp"),i=n.n(s),u=(n("n/Yi"),n("mvHQ")),c=n.n(u),d=n("NYxO"),l=n("2uFj"),p=n("M0ix"),f={loadProducts:function(e){var t=this,n=e.commit;return i()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)({method:"GET",url:l.a.products});case 3:r=e.sent,n("setProducts",r.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("damn! load products error"),console.log(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()},loadCategories:function(e){var t=this,n=e.commit;return i()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)({method:"GET",url:l.a.categories});case 3:r=e.sent,n("setCategories",r.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("damn! load categories error"),console.log(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()}},m=n("woOf"),h=n.n(m),v={setProducts:function(e,t){e.products=t},setCategories:function(e,t){e.categories=t},addToBasket:function(e,t){var n=h()({},e.products.find(function(e){return e.id===t.id}),t),r=e.basket.findIndex(function(e){var t=n.id,r=n.size,a=n.color;return e.id===t&&e.size===r&&e.color===a});r>=0?e.basket[r].count+=n.count:e.basket.push(h()({},n,{basketID:Date.now()}))},deleteFromBasket:function(e,t){e.basket=e.basket.filter(function(e){return e.basketID!==t})}};var b=[{id:1,orderID:"697-501-576-26",username:"dfadf",email:"dfa@adad.da",products:[{id:1,count:2}],phone:"12341234123",address:"adfadfa 56, xcv",details:"dafadsf",created_at:1530554525937},{id:2,orderID:"697-501-576-26",username:"adf",email:"324df@adad.da",products:[{id:2,size:"s",color:1,count:2}],phone:"89996009090",address:"wqeret 198, dzf",details:"",created_at:1530554540739}];var g={1:"Кашпо и вазоны",2:"Освещение",3:"Раковины",4:"Мебель",5:"Столешницы",6:"Плитка",7:"Аксессуары"};r.a.use(d.a),localStorage.setItem("basket",null);var k={orders:b,categories:g,basket:JSON.parse(localStorage.getItem("basket"))||[]},w=new d.a.Store({strict:!1,state:k,getters:{product:function(e){return function(t){return e.products.find(function(e){return e.id===t})}}},actions:f,mutations:v});w.watch(function(e){return e.basket},function(e){try{localStorage.setItem("basket",c()(e))}catch(e){e==QUOTA_EXCEEDED_ERR&&console.log("localStorage is full")}},{deep:!0});var x=w,P={name:"App",components:{uiSpinner:n("W1Kg").a},data:function(){return{loaded:!1}},mounted:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.dispatch("loadProducts");case 2:e.loaded=!0;case 3:case"end":return t.stop()}},t,e)}))()}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.loaded?t("router-view"):t("ui-spinner",{staticClass:"preload"})],1)},staticRenderFns:[]};var O=n("VU/8")(P,T,!1,function(e){n("0CTI")},null,null).exports,E=n("/ocq");r.a.use(E.a);var S=new E.a({routes:[{path:"/",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"seJV"))},children:[{path:"/",name:"List",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"G8IT"))}},{path:"/product/:id",name:"Product",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"T7LP"))}}]},{path:"/admin",name:"Admin",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"XDC8"))},beforeEnter:function(e,t,n){"Admin"===e.name&&S.replace({name:"ProductList"}),n()},children:[{path:"orders",name:"OrderList",component:function(){return n.e(9).then(n.bind(null,"VUwJ"))}},{path:"orders/:id",name:"EditOrder",component:function(){return n.e(8).then(n.bind(null,"SDrG"))}},{path:"products",name:"ProductList",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"eMmo"))}},{path:"products/:id",name:"EditProduct",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"yZlR"))}}]},{path:"*",name:"NotFound",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"fdhC"))}}],mode:"history"});S.beforeEach(function(e,t,n){n()});var I=S;r.a.filter("formatNumber",function(e){return e&&(e+"").replace(/\B(?=(\d{3})+(?!\d))/g," ")});var C=n("Ine4"),_=n.n(C);r.a.config.productionTip=!1,r.a.use(_.a.default),new r.a({el:"#app",router:I,store:x,template:"<App/>",components:{App:O}})},W1Kg:function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",fill:"none",stroke:"#333",viewbox:"0 0 60 60"}},[t("circle",{attrs:{cx:"30",cy:"30",r:"25"}})])},staticRenderFns:[]};var a=n("VU/8")({name:"uiSpinner"},r,!1,function(e){n("YJXl")},"data-v-300602d9",null);t.a=a.exports},YJXl:function(e,t){},"n/Yi":function(e,t,n){"use strict";var r=n("7+uW");t.a=new r.a}},["NHnr"]);
//# sourceMappingURL=app.5712108160aae127d4d8.js.map